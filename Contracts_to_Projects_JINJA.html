<html lang="fa">
    <head>
        <title>پروژه های هر قرارداد</title>
        <style>
            table, td, th {
                border: 1px solid;
                border-collapse: collapse;
            }
            td, th {
                padding: 10px;
                text-align: center;
                font-size: 12px;
            }
        </style>
    </head>
    <body>

        {% set NO_DATA = "<span style='font-size:12;color:gray;'>اطلاعات ناموجود</span>" %}

        
        {% set ENUM_GET_CREDIT = [
            {
            "value": 1,
            "label": "بودجه عمرانی دولت",
            "sort": 1
            },
            {
            "value": 2,
            "label": "بودجه غیر عمرانی",
            "sort": 2
            },
            {
            "value": 3,
            "label": "تهاتر",
            "sort": 3
            },
            {
            "value": 4,
            "label": "سرمایه گذاری",
            "sort": 4
            },
            {
            "value": 5,
            "label": "وام Eco",
            "sort": 5
            },
            {
            "value": 6,
            "label": "وام بانک توسعه اسلامی",
            "sort": 6
            },
            {
            "value": 7,
            "label": "وام بانک جهانی",
            "sort": 7
            },
            {
            "value": 8,
            "label": "کارفرما جهانی",
            "sort": 8
            },
            {
            "value": 9,
            "label": "کارفرما خصوصی",
            "sort": 9
            }
        ]%}

        {% set ENUM_LOC_EXECUT = [
            {
              "value": 1,
              "label": "داخلی",
              "sort": 0
            },
            {
              "value": 2,
              "label": "خارجی",
              "sort": 1
            }
        ]%}

        {% set ENUM_DOMAIN_EXECUT =  [
            {
              "value": 1,
              "label": "آسیای میانه",
              "sort": 1
            },
            {
              "value": 2,
              "label": "آمریکای لاتین",
              "sort": 2
            },
            {
              "value": 3,
              "label": "اروپا و آفریقا",
              "sort": 3
            },
            {
              "value": 4,
              "label": "ایران",
              "sort": 4
            },
            {
              "value": 5,
              "label": "عراق",
              "sort": 5
            }
        ]%}

        <table>

            <thead>
                <tr>
                    <th colspan="9" style = "background-color: #d6d2d2">پروژه های قرارداد {{id}} - {{TITLE}}</th>
                </tr>

                <tr style = "background-color: #e9e6e6">
                    <th>شناسه پروژه</th>
                    <th>نام پروژه</th> 
                    <th>تامین اعتبار</th>
                    <th>موقعیت عمومی پروژه</th>
                    <th>مسئول</th> 
                    <th>کد سه حرفی</th> 
                    <th>حوزه اجرا</th> 
                    <th>مختصات جغرافیایی</th> 
                    <th>چارت سازمانی</th> 
                </tr>
            </thead>

            <tbody>
    
                {%for contract in data%}
                {%for projectOne in contract.PROJECT%}
                    <tr>
                        <td>{{projectOne.id}}</td>

                        <td>{{projectOne.NAME}}</td>
                
                        {%if projectOne.GET_CREDIT is defined and projectOne.GET_CREDIT is not none%}
                            <td>{{ENUM_GET_CREDIT[projectOne.GET_CREDIT[0]].label}}</td>
                        {%else%}
                            <td>{{NO_DATA}}</td>
                        {%endif%}

                        {%if projectOne.LOC_EXECUT is defined and projectOne.LOC_EXECUT is not none%}
                            <td>{{ENUM_LOC_EXECUT[projectOne.LOC_EXECUT[0]].label}}</td>
                        {%else%}
                            <td>{{NO_DATA}}</td>
                        {%endif%}

                        {%if SIDE and SIDE is not none%}
                            <td>{{SIDE[0]["PERSON_NAME"]}}</td>
                        {%else%}
                            <td>{{NO_DATA}}</td>
                        {%endif%}

                        {%if projectOne.ABBREVIATION and projectOne.ABBREVIATION is not none%}
                            <td>{{projectOne.ABBREVIATION}}</td>
                        {%else%}
                            <td>{{NO_DATA}}</td>
                        {%endif%}

                        {%if projectOne.DOMAIN_EXECUT and projectOne.DOMAIN_EXECUT is not none%}
                            <td>{{ENUM_DOMAIN_EXECUT[projectOne.DOMAIN_EXECUT[0]].label}}</td>
                        {%else%}
                            <td>{{NO_DATA}}</td>
                        {%endif%}

                        {% if projectOne.GEO_COORDINAT and projectOne.GEO_COORDINAT is not none%}
                                <td>{{projectOne.GEO_COORDINAT | join(", ")}}</td>
                        {%else%}
                            <td>{{NO_DATA}}</td>    
                        {%endif%}

                        {%if projectOne.ORGANIZ_CHART and projectOne.ORGANIZ_CHART is not none%}
                            <td>{{projectOne.ORGANIZ_CHART}}</td>
                        {%else%}
                            <td>{{NO_DATA}}</td>
                        {%endif%}
                    </tr>
                {%endfor%}
                {%endfor%}
            </tbody>

        </table>
    </body>
</html>